<html>
    <head>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
        <link href="site.css" media="screen" rel="stylesheet" type="text/css">
        
        <!-- the tape -->
        <script src="gaffa.js" type="text/javascript"></script>
        
        <!-- views -->
        <script src="views/container.js" type="text/javascript"></script>
        <script src="views/textbox.js" type="text/javascript"></script>
        <script src="views/checkbox.js" type="text/javascript"></script>
        <script src="views/paragraph.js" type="text/javascript"></script>
        <script src="views/heading.js" type="text/javascript"></script>
        <script src="views/list.js" type="text/javascript"></script>
        <script src="views/button.js" type="text/javascript"></script>
        
        <!-- actions -->
        <script src="actions/toggle.js" type="text/javascript"></script>
        
        <!-- the application -->
        <script type="text/javascript">
        
            /* page model */
            gaffa.model.set("stuff", {
                someBool: true,
                someOtherBool: false,
                someProperty: "some text",
                anArray: [
                    "value1",
                    "value2",
                    "value3"
                ]
            });
            
            /* page view */
            gaffa.views.add({
                type: "container",
                views: {
                    content: [                        
                        {
                            type: "heading",
                            properties: {
                                text: { value: "The gaffa test page" }
                            }
                        },
                        {
                            type: "paragraph",
                            properties: {
                                text: { value: "The two textboxes are bound to the same property on the model, change one the other changes." }
                            }
                        },
                        {
                            type: "paragraph",
                            properties: {
                                text: { value: "The two checkboxes and the inner containers visibility are bound to the same bool." }
                            }
                        },
                        {
                            type: "container",
                            views: {
                                content: [
                                    {
                                        type: "heading",
                                        properties: {
                                            text: { binding: "stuff/someProperty" }
                                        }
                                    },
                                    {
                                        type: "button",
                                        properties: {
                                            text: { value: "Hide this container" }
                                        },
                                        actions:{
                                            click: [
                                                {
                                                    type: "toggle",
                                                    bindings: {
                                                        toggle: "stuff/someOtherBool"
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                ] 
                            },
                            properties: {
                                visible: { binding: "stuff/someOtherBool" },
                                classes:{
                                    value: "classname"
                                }
                            }
                        },
                        {
                            type: "textbox",
                            properties: {
                                text: { binding: "stuff/someProperty" }
                            }
                        },
                        {
                            type: "textbox",
                            properties: {
                                text: { binding: "stuff/someProperty" }
                            }
                        },
                        {
                            type: "textbox",
                            properties: {
                                text: { value: "Unbound, pre-filled properties" }
                            }
                        },
                        {
                            type: "checkbox",
                            properties: {
                                checked: { binding: "stuff/someOtherBool" }
                            }
                        },
                        {
                            type: "paragraph",
                            properties: {
                                text: { value: "The next container has a list view, with a template for textboxes" }
                            }
                        },
                        {
                            type: "container",
                            views: {
                                content: [
                                    {
                                        type: "list",
                                        binding: "stuff/anArray",
                                        properties: {
                                            list: { 
                                                binding: "stuff/anArray",
                                                template: {
                                                    type: "textbox",
                                                    properties: {
                                                        text: { binding: "~" }
                                                    }
                                                } 
                                            }
                                        }
                                    }
                                ] 
                            }
                        },
                        {
                            type: "button",
                            properties: {
                                text: { value: "Toggle model property" }
                            },
                            actions:{
                                click: [
                                    {
                                        type: "toggle",
                                        bindings: {
                                            toggle: "stuff/someOtherBool"
                                        }
                                    }
                                ]
                            }
                        }                   
                    ] 
                },
                properties: {
                    visible: { binding: "stuff/someBool" }
                }
            });
            
            /* Webpage++ */
            $(document).ready(function(){
                gaffa.views.renderTarget = $(".renderHere");
                gaffa.views.render();
            });
        
        </script>
        <style>
            .container {
                border: solid 1px red;
                padding: 5px;
                background: rgba(0,0,0,0.2);
                }
        </style>
    </head>
    <body>
        <div class="renderHere"></div>
    </body>
</html>