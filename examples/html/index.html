<html>
    <head>
		<title>gaffa</title>
		<meta name="description" content="gaffa node example" />		
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
        <link href="css/site.css" media="screen" rel="stylesheet" type="text/css">
        <!-- the tape -->
        <script src="scripts/gaffa.js" type="text/javascript"></script>
        <!-- bundle -->
		<script src="scripts/actions.js" type="text/javascript"></script>
        <script src="scripts/views.js" type="text/javascript"></script>
        <!-- the application -->
        <script type="text/javascript">
        
            /* page model */
            gaffa.model.set("stuff", {
                show4thContainer: false,
                show5thContainer: false,
                someBool: true,
                someOtherBool: false,
                someProperty: "a heading",
                thirdHeading: "Cool story bro...",
                anArray: [
                    "value1",
                    "value2",
                    "value3"
                ]
            });
            
            gaffa.behaviours.add([
                {
                    binding: "stuff",
                    actions: [
                        {
                            type: "toJson",
                            bindings: {
                                setFrom: { binding: "stuff" },
                                setTo: { binding: "things" }
                            }
                        }
                    ]
                }    
            ]);
            
            /* page view */
            gaffa.views.add([
                {
                    type: "nav",
                    properties: {
                        text: { value: "gaffa.js" },
                        fixed: { value: true }
                    }
                },
                {
                    type: "container",
                    properties: {
                        classes: { value: "container"}    
                    },
                    views: {
                        content: [
                        {
                            type: "container",
                            properties: {
                                classes: { value: "row" }
                            },
                            views: {
                                content: [
                                    {
                                        type: "container",  
                                        properties: {
                                            classes: { value: "span12" }
                                        },
                                        views: {
                                            content: [
                                                {
                                                    type: "heading",
                                                    properties: {
                                                        text: { value: "What is Gaffa?" }
                                                    }
                                                },
                                                {
                                                    type: "quote",
                                                    properties: {
                                                        text: { value: "Gaffer tape, gaffer's tape, gaff tape[1] or gaffa tape[2] is a strong, tough, cotton cloth pressure sensitive tape with strong adhesive properties." },
                                                        cite: { value: "Wikipedia" },
                                                        citeHref: { value: "http://en.wikipedia.org/wiki/Gaffer_tape" },
                                                        classes: { binding: "stuff/someProperty" }
                                                        //alignment: { value: "right" }
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                ]
                            }
                        },
                        {
                            type: "container",
                            properties: {
                                classes: { value: "row" }
                            },
                            views: {
                                content: [
                                    {
                                        type: "container",  
                                        properties: {
                                            classes: { value: "span12" }
                                        },
                                        views: {
                                            content: [
                                                {
                                                    type: "heading",
                                                    properties: {
                                                        text: { value: "But seriously..." }
                                                    }
                                                },
                                                {
                                                    type:"paragraph",
                                                    views:{
                                                        content: [
                                                            "<b>gaffa.js</b> sticks your DOM to your models. Just set your model to any javascript object, and bind your pages views to properties on it, using paths."
                                                        ]
                                                    }
                                                },
                                                {
                                                    type:"paragraph",
                                                    views:{
                                                        content:[
                                                            {
                                                                type: "text",
                                                                properties: {
                                                                    text: { value: "100% of all the things are JSON, the page is made up of JSON 'views'" }
                                                                }
                                                            }
                                                        ]
                                                    }
                                                },
                                                {
                                                    type:"paragraph",
                                                    views:{
                                                        content:[
                                                            {
                                                                type: "text",
                                                                properties: {
                                                                    text: { value: "Because everything is made up of these 'views', reusing layout is a must. This helps create a consistant UI." }
                                                                }
                                                            }
                                                        ]
                                                    }
                                                }
                                            ]
                                        }
                                    },
                                    {
                                        type: "container",  
                                        properties: {
                                            classes: { value: "span12" }
                                        },
                                        views: {
                                            content: [
                                                {
                                                    type: "heading",
                                                    properties: {
                                                        text: { binding: "stuff/thirdHeading" }
                                                    }
                                                },
                                                {
                                                    type:"paragraph",
                                                    views:{
                                                        content: [
                                                            "It is a \"",
                                                            {
                                                                type:"text",
                                                                properties: {
                                                                    text: {binding:"stuff/thirdHeading"}
                                                                }
                                                            },
                                                            "\", though the implications might not be obvious straight away.<br /><br />Check out this next bit of form:"
                                                        ]
                                                    }
                                                },
                                                {
                                                    type:"paragraph",
                                                    views:{
                                                        content:[
                                                            {
                                                                type:"form",
                                                                views:{
                                                                    content:[
                                                                        {
                                                                            type:"textbox",
                                                                            properties: {
                                                                                value: {binding:"stuff/thirdHeading"}
                                                                            },
                                                                            actions:{
                                                                                change:[
                                                                                    {
                                                                                        type: "set",
                                                                                        bindings: {
                                                                                            setTo: { binding: "stuff/show4thContainer"},
                                                                                            setFrom: { value: true}
                                                                                        }
                                                                                    },
                                                                                    {
                                                                                        type: "set",
                                                                                        bindings: {
                                                                                            setTo: { binding: "stuff/show5thContainer"},
                                                                                            setFrom: { value: true}
                                                                                        }
                                                                                    }
                                                                                ]
                                                                            }
                                                                        }
                                                                    ]
                                                                }
                                                            }
                                                        ]
                                                    }
                                                },
                                                {
                                                    type:"paragraph",
                                                    views:{
                                                        content: [
                                                            "Change the value of the textbox (and then tab out to trigger the changed event)"
                                                        ]
                                                    }
                                                }
                                            ]
                                        }
                                    },
                                    {
                                        type: "container",  
                                        properties: {
                                            classes: { value: "span12" },
                                            visible: { binding: "stuff/show4thContainer"}
                                        },
                                        views: {
                                            content: [
                                                {
                                                    type: "heading",
                                                    properties: {
                                                        text: { value: "Kewl!" }
                                                    }
                                                },
                                                {
                                                    type:"paragraph",
                                                    views:{
                                                        content: [
                                                            "The textbox above, the H1 above it, and some text in between the two are ",
                                                            "all bound to the same property on the model, changing the text in the textbox ",
                                                            "updates the model, which tells all things bound to it to update too.<br /><br />",
                                                            "There is also an action bound to the change event on the textbox, that sets a property in the model to true. ",
                                                            "This containers visibility is bound to that same property<br /><br />",
                                                            "This button sets that same property to false: ",
                                                            { 
                                                                type: "button",
                                                                properties: {
                                                                    text: { value: "Hide this container" }
                                                                },
                                                                actions:{
                                                                    click:[
                                                                        {
                                                                            type: "set",
                                                                            bindings: {
                                                                                setTo: { binding: "stuff/show4thContainer"},
                                                                                setFrom: { value: false}
                                                                            }
                                                                        }   
                                                                    ]
                                                                }                                                          
                                                            }
                                                        ]
                                                    }
                                                }
                                            ]
                                        }
                                    },
                                    {
                                        type: "container",  
                                        properties: {
                                            classes: { value: "span12" },
                                            visible: { binding: "stuff/show5thContainer"}
                                        },
                                        views: {
                                            content: [
                                                {
                                                    type: "heading",
                                                    properties: {
                                                        text: { value: "Other stuff" }
                                                    }
                                                },
                                                "You can also bind a list to an array, provide a template view, and let it do the rest. ",
                                                "All templated views will be bound just as any pre-existing views would.",
                                                {
                                                    type: "list",
                                                    binding: "stuff/anArray",
                                                    properties:
                                                    {
                                                        list:{
                                                            template: {
                                                                type: "textbox",
                                                                properties: {
                                                                    value: { binding: "~"}
                                                                }
                                                            },
                                                            binding: "stuff/anArray"
                                                        }
                                                    }
                                                },
                                                "<br/><br/>In this area is the JSON model for this page, changing it will change the pages model, good luck not breaking something..",
                                                {
                                                    type: "textarea",
                                                    properties: {
                                                        value: { binding: "things/jsonStuff"},
                                                        classes: { value:"span12" }
                                                    },
                                                    actions: {
                                                        change:[
                                                            {
                                                                type: "fromJson",
                                                                bindings: {
                                                                    setFrom: { binding: "things/jsonStuff" },
                                                                    setTo: { binding: "stuff" }
                                                                }
                                                            }
                                                        ]
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                ]
                            }
                        }
                    ]
                }
            }]);

            /* Webpage++ */
            $(document).ready(function(){
                gaffa.views.renderTarget = $("body");
                gaffa.views.render();
            });
        
        </script>
        <style>
            body > .container{
                margin-top:40px;    
            }
            
            form{
                background: #aaa;
                padding:10px;
                border-radius: 5px;
            }
        </style>
    </head>
    <body>
    </body>
</html>
